import{c as v,j as t,B as b,L as z,a as f}from"./index-DxDjdAZm.js";import{T as pe,a as ue}from"./AnimatedBackground-D5BGCIvK.js";import{C as V,P as ge}from"./users-DHITAXSj.js";import{X as R}from"./input-CHc0xvdJ.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],De=v("award",he);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Se=v("briefcase",ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Fe=v("chevron-up",fe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Me=v("clock",xe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Re=v("file-text",be);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ze=v("map-pin",ve);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Le=v("pen-line",je);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ue=v("phone",we);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],I=v("save",Ne);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Oe=v("star",_e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Be=v("target",ke);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Je=v("trending-up",Ee),m="http://localhost:7001";class X extends Error{constructor(e,a=null,r=null){super(e),this.name="EmployeeApiError",this.status=a,this.data=r}}async function p(s){const e=s.headers.get("content-type");let a;if(e&&e.includes("application/json")?a=await s.json():a=await s.text(),!s.ok){if(s.status===422&&a.detail){const r=a.detail.map(o=>`${o.loc[o.loc.length-1]}: ${o.msg}`).join(", ");throw new X(r||"Validation error",s.status,a)}throw new X(a.detail||a.message||`HTTP ${s.status}`,s.status,a)}return a}function j(s,e){if(s==null||s==="")return e;if(typeof s=="string")try{return JSON.parse(s)}catch(a){return console.warn("Failed to parse JSON field:",s,a),e}return s}function G(s){return{...s,name:s.name||"Unknown",role:s.role||"No Role",department:s.department||"No Department",email:s.email||"",hire_date:s.hire_date||null,availability:s.availability||"available",performance:{score:s.performance_score||80,dealsWon:s.deals_won||0,responseTime:s.response_time||"2 hours"},specialties:s.specialties||[],strengths:s.strengths||[],recent_achievements:s.recent_achievements||[],currentProjects:s.current_projects||0,completionRate:s.completion_rate||85,recentAchievements:s.recent_achievements||[],experience:s.working_year||0,skills:j(s.skills,{technical:[],domain:[],methodologies:[],certifications:[]}),languages:j(s.languages,[]),experiences:j(s.experiences,[]),mbti_profile:j(s.mbti_profile,{type:"",nickname:"",percentages:{extravert:50,intuitive:50,thinking:50,judging:50},workingStyle:[],communicationPreferences:[],idealCollaboration:""}),location:j(s.location,{})}}function Y(s){const e={...s};if(s.performance&&(e.performance_score=s.performance.score,e.deals_won=s.performance.dealsWon,e.response_time=s.performance.responseTime,delete e.performance),s.currentProjects!==void 0&&(e.current_projects=s.currentProjects,delete e.currentProjects),s.completionRate!==void 0&&(e.completion_rate=s.completionRate,delete e.completionRate),s.recentAchievements!==void 0&&(e.recent_achievements=s.recentAchievements,delete e.recentAchievements),s.start_date&&(e.hire_date=s.start_date,delete e.start_date),s.job_title&&!e.role&&(e.role=s.job_title),delete e.job_title,!e.email&&e.name){const a=e.name.toLowerCase().replace(/\s+/g,".");e.email=`${a}@company.com`}return e.location||(e.location={}),e.employee_id&&(e.id=parseInt(e.employee_id,10),delete e.employee_id),delete e.manager,delete e.manager_notes,e.experience!==void 0&&e.working_year===void 0&&(e.working_year=e.experience),delete e.experience,e}class Ce{constructor(){this.baseUrl=m}async getAllEmployees(e={}){const a=new URLSearchParams;e.department&&a.append("department",e.department),e.search&&a.append("search",e.search),e.working_year!==void 0?a.append("working_year",e.working_year):e.experience!==void 0&&a.append("working_year",e.experience),e.timezone&&a.append("timezone",e.timezone),e.performance_score!==void 0&&a.append("performance_score",e.performance_score),e.include_feedback&&a.append("include_feedback",e.include_feedback);const r=a.toString(),o=`${m}/api/employees${r?`?${r}`:""}`,l=await fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}});return(await p(l)).map(G)}async getAllEmployeesWithPerformance(e={}){try{const a=await this.getAllEmployees(e);return await Promise.all(a.map(async o=>{try{const l=await this.getEmployeePerformance(o.id);return{...o,performance:l}}catch(l){return console.error(`Failed to fetch performance for employee ${o.id}:`,l),{...o,performance:{total_revenue:0,total_projects:0,performance_score:0,peer_evaluations:{averageScore:0,totalReviews:0,feedback:[]},self_assessments:{lastUpdated:"",strengths:[],growthAreas:[],goals:[]}}}}}))}catch(a){throw console.error("Failed to fetch employees with performance:",a),a}}async getEmployeeById(e){const a=await fetch(`${m}/api/employees/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await p(a);return G(r)}async getEmployeeByEmail(e){console.log("EmployeeApi: getEmployeeByEmail called with email:",e),console.log("EmployeeApi: Base URL:",m);const a=`${m}/api/employees/by-email?email=${encodeURIComponent(e)}`;console.log("EmployeeApi: Making request to URL:",a);const r=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});console.log("EmployeeApi: Response status:",r.status,r.statusText),console.log("EmployeeApi: Response ok:",r.ok);const o=await p(r);console.log("EmployeeApi: Raw employee data from API:",o);const l=G(o);return console.log("EmployeeApi: Transformed employee data:",l),l}async getEmployeePerformance(e){console.log("EmployeeApi: getEmployeePerformance called with ID:",e);const a=`${m}/api/employees/${e}/performance`;console.log("EmployeeApi: Making performance request to URL:",a);const r=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});console.log("EmployeeApi: Performance response status:",r.status,r.statusText);const o=await p(r);console.log("EmployeeApi: Raw performance data from API:",o);const l={...o,projects:j(o.projects,[]),top_projects:j(o.top_projects,[]),milestones:j(o.milestones,[]),peer_evaluations:j(o.peer_evaluations,{averageScore:4.5,totalReviews:0,feedback:[]}),self_assessments:j(o.self_assessments,{lastUpdated:"",strengths:[],growthAreas:[],goals:[]}),employee_goal:j(o.employee_goal,[]),performance_score:o.performance_score||80};return console.log("EmployeeApi: Transformed performance data:",l),l}async updateEmployeePerformance(e,a){const r=await fetch(`${m}/api/employees/${e}/performance`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return await p(r)}async getCustomersByEmployee(e){const a=await fetch(`${m}/api/customers/by-employee/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});return await p(a)}async getLeadsByEmployee(e){const a=await fetch(`${m}/api/customers/leads/by-employee/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});return await p(a)}async createEmployee(e){const a=Y(e),r=await fetch(`${m}/api/employees/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),o=await p(r);return G(o)}async updateEmployee(e,a){const r=Y(a),o=await fetch(`${m}/api/employees/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await p(o);return G(l)}async deleteEmployee(e){const a=await fetch(`${m}/api/employees/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return p(a)}async getDepartments(){const e=await fetch(`${m}/api/employees/departments`,{method:"GET",headers:{"Content-Type":"application/json"}});return(await p(e)).departments||[]}async getTimezones(){const e=await fetch(`${m}/api/employees/timezones`,{method:"GET",headers:{"Content-Type":"application/json"}});return(await p(e)).timezones||[]}async getMetricsSummary(){const e=await fetch(`${m}/api/employees/metrics/summary`,{method:"GET",headers:{"Content-Type":"application/json"}});return p(e)}async getEmployeeGoals(e){const a=await fetch(`${m}/api/employees/${e}/goals`,{method:"GET",headers:{"Content-Type":"application/json"}});return(await p(a)).goals||[]}async saveEmployeeGoals(e,a){const r=await fetch(`${m}/api/employees/${e}/goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goals:a})});return(await p(r)).goals||[]}async updateEmployeeGoal(e,a,r){const o=await fetch(`${m}/api/employees/${e}/goals/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});return(await p(o)).goal}async deleteEmployeeGoal(e,a){const r=await fetch(`${m}/api/employees/${e}/goals/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return(await p(r)).deleted||!1}async checkHealth(){const e=await fetch(`${m}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});return p(e)}async getAllEmployeesWithFeedback(e={}){return this.getAllEmployees({...e,include_feedback:!0})}async getAllEmployeesWithPerformanceAndFeedback(e={}){try{const a=await this.getAllEmployeesWithPerformance(e);return await Promise.all(a.map(async o=>{try{const l=await fetch(`${m}/api/employees/${o.id}/feedback/summary`,{method:"GET",headers:{"Content-Type":"application/json"}});let d=null;return l.ok?d=await l.json():(l.status===404||console.warn(`Failed to fetch feedback for employee ${o.id}: ${l.status} ${l.statusText}`),d=null),{...o,feedback_rating:(d==null?void 0:d.average_rating)||null,feedback_comment:(d==null?void 0:d.recent_comment)||null,feedback_count:(d==null?void 0:d.total_feedback)||0}}catch(l){return console.warn(`Network error fetching feedback for employee ${o.id}:`,l),{...o,feedback_rating:null,feedback_comment:null,feedback_count:0}}}))}catch(a){throw console.error("Failed to fetch employees with performance and feedback:",a),a}}async getEmployeeFeedback(e){const a=await fetch(`${m}/api/employees/${e}/feedback`,{method:"GET",headers:{"Content-Type":"application/json"}});return p(a)}async getEmployeeFeedbackSummary(e){const a=await fetch(`${m}/api/employees/${e}/feedback/summary`,{method:"GET",headers:{"Content-Type":"application/json"}});return p(a)}async getAllCustomerFeedback(){const e=await fetch(`${m}/api/employees/feedback/all`,{method:"GET",headers:{"Content-Type":"application/json"}});return p(e)}async createCustomerFeedback(e){const a=await fetch(`${m}/api/employees/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return p(a)}_calculateTotalRevenue(e){try{return!e||!Array.isArray(e)?0:e.reduce((a,r)=>r&&typeof r.revenue=="number"&&r.revenue>=0?a+r.revenue:a,0)}catch(a){return console.error("Error calculating total revenue:",a),0}}async addProject(e,a){const r=await this.getEmployeePerformance(e),o=[...r.projects||[],a];let l;try{l=this._calculateTotalRevenue(o)}catch(u){console.warn("Failed to calculate total revenue, using existing value:",u),l=r.total_revenue||0}const d={...r,projects:o,total_revenue:l};return await this.updateEmployeePerformance(e,d)}async updateProject(e,a,r){const o=await this.getEmployeePerformance(e),l=(o.projects||[]).map(x=>x.id===a?{...x,...r}:x);let d;try{d=this._calculateTotalRevenue(l)}catch(x){console.warn("Failed to calculate total revenue, using existing value:",x),d=o.total_revenue||0}const u={...o,projects:l,total_revenue:d};return await this.updateEmployeePerformance(e,u)}async deleteProject(e,a){const r=await this.getEmployeePerformance(e),o=(r.projects||[]).filter(u=>u.id!==a);let l;try{l=this._calculateTotalRevenue(o)}catch(u){console.warn("Failed to calculate total revenue, using existing value:",u),l=r.total_revenue||0}const d={...r,projects:o,total_revenue:l};return await this.updateEmployeePerformance(e,d)}async addMilestone(e,a){const r=await this.getEmployeePerformance(e),o=[...r.milestones||[],a],l={...r,milestones:o};return await this.updateEmployeePerformance(e,l)}async updateMilestone(e,a,r){const o=await this.getEmployeePerformance(e),l=(o.milestones||[]).map(u=>u.id===a?{...u,...r}:u),d={...o,milestones:l};return await this.updateEmployeePerformance(e,d)}async deleteMilestone(e,a){const r=await this.getEmployeePerformance(e),o=(r.milestones||[]).filter(d=>d.id!==a),l={...r,milestones:o};return await this.updateEmployeePerformance(e,l)}}const k=new Ce,Te=({isOpen:s,onClose:e,onConfirm:a,title:r="Confirm Deletion",message:o="Are you sure you want to delete this item? This action cannot be undone.",loading:l=!1,itemType:d="item"})=>{if(!s)return null;const u=()=>{a()};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-sm w-full p-6 border",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(pe,{className:"w-6 h-6 text-red-600"})}),t.jsx("div",{className:"flex-1",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})})]}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-sm text-gray-600",children:o})}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx(b,{type:"button",variant:"outline",onClick:e,disabled:l,children:"Cancel"}),t.jsx(b,{type:"button",className:"bg-red-600 hover:bg-red-700 text-white",onClick:u,disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 animate-spin mr-2"}),"Deleting..."]}):`Delete ${d}`})]})]})})};function We({employeeId:s,goals:e,setGoals:a,skipInitialLoad:r=!1,renderHeader:o}){const[l,d]=f.useState(!1),[u,x]=f.useState([]),[Z,S]=f.useState(!1),[E,F]=f.useState(null),[_,L]=f.useState({title:"",details:"",targetDate:"",progress:0}),[K,U]=f.useState(!1),[g,w]=f.useState(!1),[$,h]=f.useState(null),[Q,O]=f.useState(!1),[C,B]=f.useState(null);f.useEffect(()=>{if(r||!s)return;(async()=>{U(!0),h(null);try{const c=await k.getEmployeeGoals(s);a(c||[])}catch(c){console.error("Error loading goals:",c),h("Failed to load goals. Please try again.")}finally{U(!1)}})()},[s,a,r]);const J=()=>!e||e.length===0?1:Math.max(...e.map(n=>n.id||0))+1,[W,M]=f.useState(!1),[y,A]=f.useState({title:"",details:"",targetDate:"",status:"in progress",progress:0}),ee=()=>{const c=(e||[]).map(i=>({id:i.id,title:i.title||"",details:i.details||"",targetDate:i.targetDate||"",progress:i.progress||0,status:i.status||"in progress"}));x(c),d(!0),h(null)},te=()=>{d(!1),x([]),h(null)},ae=()=>{const n={id:Date.now(),title:"",details:"",targetDate:"",progress:0,status:"in progress"};x([...u,n])},se=n=>{x(u.filter((c,i)=>i!==n))},T=(n,c,i)=>{x(N=>N.map((H,me)=>me===n?{...H,[c]:i}:H))},re=async()=>{w(!0),h(null);try{const n=u.filter(i=>i.title.trim()!==""||i.details.trim()!==""),c=await k.saveEmployeeGoals(s,n);a(c),d(!1),x([])}catch(n){console.error("Error updating goals:",n),h("Failed to update goals. Please try again.")}finally{w(!1)}},ne=async()=>{if(C){w(!0),h(null);try{await k.deleteEmployeeGoal(s,C.id),a(e.filter(n=>n.id!==C.id)),O(!1),B(null)}catch(n){console.error("Error deleting goal:",n),h("Failed to delete goal. Please try again.")}finally{w(!1)}}},oe=()=>{O(!1),B(null)},le=async n=>{const c=e.find(N=>N.id===n);if(!c)return;const i={...c,status:c.status==="completed"?"in progress":"completed",progress:c.status==="completed"?c.progress:100};w(!0),h(null);try{await k.updateEmployeeGoal(s,n,i),a(e.map(N=>N.id===n?i:N))}catch(N){console.error("Error updating goal:",N),h("Failed to update goal. Please try again.")}finally{w(!1)}},ce=()=>{A({title:"",details:"",targetDate:"",status:"in progress",progress:0}),M(!0)},q=()=>{M(!1),A({title:"",details:"",targetDate:"",status:"in progress",progress:0})},P=(n,c)=>{A(i=>({...i,[n]:c}))},ie=async()=>{if(y.title.trim()){w(!0),h(null);try{const n={id:J(),title:y.title.trim(),details:y.details.trim(),targetDate:y.targetDate,status:y.status,progress:y.progress},c=[...e,n];await k.saveEmployeeGoals(s,c),a(c),M(!1),A({title:"",details:"",targetDate:"",status:"in progress",progress:0})}catch(n){console.error("Error adding goal:",n),h("Failed to add goal. Please try again.")}finally{w(!1)}}},D=n=>{const{name:c,value:i}=n.target;L(N=>({...N,[c]:c==="progress"?Number(i):i}))},de=async n=>{if(n.preventDefault(),!!_.title.trim()){w(!0),h(null);try{if(E){const c={...E,..._};await k.updateEmployeeGoal(s,E.id,c),a(e.map(i=>i.id===E.id?c:i))}else{const c={..._,id:J(),status:"in progress"},i=[...e,c];await k.saveEmployeeGoals(s,i),a(i)}S(!1),F(null),L({title:"",details:"",targetDate:"",progress:0})}catch(c){console.error("Error saving goal:",c),h("Failed to save goal. Please try again.")}finally{w(!1)}}};return K?t.jsx("div",{className:"bg-white rounded-lg border p-5 shadow-sm mb-6",children:t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(z,{className:"w-6 h-6 text-indigo-600 animate-spin mr-2"}),t.jsx("span",{className:"text-gray-600",children:"Loading goals..."})]})}):t.jsxs(t.Fragment,{children:[o&&o(l?null:ee,ce),t.jsxs("div",{className:"p-6",children:[$&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[t.jsx(V,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-red-700 text-sm",children:$})]}),l?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Goals"}),t.jsxs(b,{variant:"ghost",size:"sm",onClick:ae,className:"flex items-center gap-1 text-green-600 hover:text-green-700 hover:bg-green-50 text-sm",children:[t.jsx(ge,{className:"w-3 h-3"}),"Add"]})]}),t.jsxs("div",{className:"space-y-4",children:[u.map((n,c)=>t.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h5",{className:"text-sm font-medium text-gray-700",children:["Goal #",c+1]}),t.jsx(b,{variant:"ghost",size:"sm",onClick:()=>se(c),className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-1",children:t.jsx(ue,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),t.jsx("input",{type:"text",value:n.title,onChange:i=>T(c,"title",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter goal title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Date"}),t.jsx("input",{type:"date",value:n.targetDate,onChange:i=>T(c,"targetDate",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),t.jsx("textarea",{value:n.details,onChange:i=>T(c,"details",i.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter goal details"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Progress (",n.progress,"%)"]}),t.jsx("input",{type:"range",min:"0",max:"100",value:n.progress,onChange:i=>T(c,"progress",parseInt(i.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:n.status,onChange:i=>T(c,"status",i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[t.jsx("option",{value:"in progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]})]})]},c)),u.length===0&&t.jsx("p",{className:"text-gray-500 text-sm italic text-center py-4",children:'No goals added yet. Click "Add" to create your first goal.'})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t",children:[t.jsxs(b,{onClick:re,disabled:g,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:[t.jsx(I,{className:"w-4 h-4"}),g?"Saving...":"Save Changes"]}),t.jsxs(b,{variant:"outline",onClick:te,disabled:g,className:"flex items-center gap-2",children:[t.jsx(R,{className:"w-4 h-4"}),"Cancel"]})]})]}):t.jsx(t.Fragment,{children:(!e||e.length===0)&&!W?t.jsx("div",{className:"text-gray-500 text-sm",children:'No goals set yet. Click "Add Goal" to create your first goal!'}):t.jsxs("ul",{className:"divide-y",children:[e.map(n=>t.jsxs("li",{className:"py-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx("span",{className:"font-medium text-gray-900",children:n.title}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${n.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:n.status==="completed"?"Completed":"In Progress"}),n.targetDate&&t.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",n.targetDate]})]}),t.jsx(b,{size:"xs",onClick:()=>le(n.id),disabled:g,className:`ml-3 text-xs px-2 py-1 ${n.status==="completed"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:n.status==="completed"?"Mark Incomplete":"Mark Complete"})]}),n.details&&t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:n.details}),typeof n.progress=="number"&&t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-green-500 h-1.5 rounded-full",style:{width:`${n.progress}%`}})})]},n.id)),W&&t.jsx("li",{className:"py-3 border-t-2 border-green-200",children:t.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Add New Goal"}),t.jsx(b,{variant:"ghost",size:"sm",onClick:q,className:"text-red-600 hover:text-red-700 hover:bg-red-50 p-1",children:t.jsx(R,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),t.jsx("input",{type:"text",value:y.title,onChange:n=>P("title",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter goal title"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Date"}),t.jsx("input",{type:"date",value:y.targetDate,onChange:n=>P("targetDate",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),t.jsx("textarea",{value:y.details,onChange:n=>P("details",n.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter goal details"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Progress (",y.progress,"%)"]}),t.jsx("input",{type:"range",min:"0",max:"100",value:y.progress,onChange:n=>P("progress",parseInt(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsxs("select",{value:y.status,onChange:n=>P("status",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",children:[t.jsx("option",{value:"in progress",children:"In Progress"}),t.jsx("option",{value:"completed",children:"Completed"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 mt-4 border-t",children:[t.jsxs(b,{variant:"outline",onClick:q,disabled:g,className:"flex items-center gap-2",children:[t.jsx(R,{className:"w-4 h-4"}),"Cancel"]}),t.jsxs(b,{onClick:ie,disabled:g||!y.title.trim(),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white disabled:opacity-50",children:[t.jsx(I,{className:"w-4 h-4"}),g?"Adding...":"Add Goal"]})]})]})})]})})]}),Z&&!l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("form",{onSubmit:de,className:"bg-white rounded-xl shadow-lg max-w-md w-full p-6 flex flex-col gap-4 border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h2",{className:"text-lg font-bold text-indigo-700",children:E?"Edit Goal":"Add New Goal"}),t.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 text-2xl",onClick:()=>{S(!1),F(null)},disabled:g,children:"Ã—"})]}),$&&t.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[t.jsx(V,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"text-red-700 text-sm",children:$})]}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Title",t.jsx("input",{type:"text",name:"title",className:"mt-1 border rounded px-3 py-2 w-full",value:_.title,onChange:D,required:!0,disabled:g})]}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Details",t.jsx("textarea",{name:"details",className:"mt-1 border rounded px-3 py-2 w-full",value:_.details,onChange:D,disabled:g})]}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Target Date",t.jsx("input",{type:"date",name:"targetDate",className:"mt-1 border rounded px-3 py-2 w-full",value:_.targetDate,onChange:D,disabled:g})]}),t.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Progress (%)",t.jsx("input",{type:"number",name:"progress",min:"0",max:"100",className:"mt-1 border rounded px-3 py-2 w-full",value:_.progress,onChange:D,disabled:g})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsx(b,{type:"button",variant:"outline",className:"border border-gray-300",onClick:()=>{S(!1),F(null)},disabled:g,children:"Cancel"}),t.jsx(b,{type:"submit",className:"px-4 py-0 bg-indigo-950 text-white hover:bg-indigo-950/90",disabled:g,children:g?t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4 animate-spin mr-2"}),"Saving..."]}):E?"Save Changes":"Add Goal"})]})]})}),t.jsx(Te,{isOpen:Q,onClose:oe,onConfirm:ne,title:"Delete Goal",message:`Are you sure you want to delete the goal "${C==null?void 0:C.title}"? This action cannot be undone.`,loading:g,itemType:"Goal"})]})}export{De as A,Se as B,Me as C,Te as D,X as E,Re as F,We as G,ze as M,Le as P,Oe as S,Be as T,I as a,Je as b,Fe as c,Ue as d,k as e};
